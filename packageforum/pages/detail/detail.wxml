<view class="container">
  <!-- å¸–å­è¯¦æƒ… -->
  <view class="post-detail">
    <view class="userinfo">
      <!-- å¤´åƒ -->
      <image class="avatar" src="{{post.avatarUrl}}"></image>
      <!-- æ˜µç§° -->
      <text class="username">{{post.nickName}}</text>
      <!-- ç”¨æˆ·ä¿¡æ¯ -->
      <view class="post-meta">
        <text class="post-author">Uid: {{post.userId}}</text>
        <text class="post-time">{{formatTime(post.createdAt)}}</text>
      </view>
    </view>
    <!-- æ ‡é¢˜ -->
    <view class="post-title">{{post.title}}</view>
    <!-- æè¿° -->
    <view class="post-description">{{post.description}}</view>
    <!-- å›¾ç‰‡ -->
    <view class="post-images" wx:if="{{post.images.length > 0}}">
      <image
        wx:for="{{post.images}}"
        wx:key="index"
        src="{{item}}"
        mode="aspectFill"
        class="post-image"
      ></image>
    </view>

    <!-- ç‚¹èµå’Œè¯„è®º -->
    <view class="post-actions">
      <!-- ç‚¹èµæŒ‰é’® -->
      <button
        class="like-btn"
        bindtap="handleLike"
        data-post-id="{{post._id}}"
      >
        <text>ğŸ‘</text> {{post.likeCount || 0}}
      </button>
      <!-- è¯„è®ºæŒ‰é’® -->
      <button
        class="comment-btn"
        bindtap="toggleCommentSection"
        data-post-id="{{post._id}}"
      >
        <text>ğŸ’¬</text> {{post.commentCount || 0}}
      </button>
    </view>
    <!-- è¯„è®ºåŒºåŸŸ -->
    <view class="comments-section">
      <view class="comment-list">
        <block wx:for="{{comments}}" wx:key="_id">
          <view class="comment-item">
            <text class="comment-author">{{item.userId}}:</text>
            <text class="comment-content">{{item.content}}</text>
          </view>
        </block>
      </view>
      <!-- å‘è¡¨è¯„è®ºè¾“å…¥æ¡† -->
      <view class="comment-input" wx:if="{{showCommentInput}}">
        <input
          type="text"
          placeholder="å‘è¡¨è¯„è®º..."
          value="{{newComment}}"
          bindinput="onCommentInput"
        />
        <button bindtap="handleComment" data-post-id="{{post._id}}">
          å‘è¡¨
        </button>
      </view>
    </view>
  </view>
</view>